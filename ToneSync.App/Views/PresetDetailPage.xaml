<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:ToneSync.App.ViewModels"
             x:Class="ToneSync.App.Views.PresetDetailPage"
             x:DataType="vm:PresetDetailViewModel"
             Title="Preset Details"
             BackgroundColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Black}}">

  <ScrollView>
    <VerticalStackLayout Padding="20" Spacing="20">

      <!-- Preset Name -->
      <Label Text="{Binding Preset.DisplayName}"
             FontSize="32"
             FontAttributes="Bold"
             HorizontalTextAlignment="Center"
             Margin="0,20,0,0" />

      <!-- Category Badge -->
      <Border BackgroundColor="{StaticResource Primary}"
              Padding="12,6"
              StrokeThickness="0"
              StrokeShape="RoundRectangle 20"
              HorizontalOptions="Center">
        <Label Text="{Binding CategoryText}"
               TextColor="White"
               FontSize="12"
               FontAttributes="Bold" />
      </Border>

      <!-- Stereo Warning -->
      <Border BackgroundColor="{StaticResource Info}"
              Padding="15"
              StrokeThickness="0"
              StrokeShape="RoundRectangle 12"
              IsVisible="{Binding ShowWarning}"
              Margin="0,10,0,0">
        <Label Text="{Binding WarningText}"
               TextColor="White"
               FontSize="14"
               FontAttributes="Bold"
               HorizontalTextAlignment="Center"
               LineBreakMode="WordWrap" />
      </Border>

      <!-- Error Display -->
      <Border BackgroundColor="{StaticResource Danger}"
              Padding="15"
              StrokeThickness="0"
              StrokeShape="RoundRectangle 12"
              IsVisible="{Binding HasError}"
              Margin="0,10,0,0">
        <VerticalStackLayout Spacing="10">
          <Label Text="⚠️ Error"
                 TextColor="White"
                 FontSize="16"
                 FontAttributes="Bold" />
          <Label Text="{Binding ErrorMessage}"
                 TextColor="White"
                 FontSize="14"
                 LineBreakMode="WordWrap" />
          <Button Text="Dismiss"
                  Command="{Binding DismissErrorCommand}"
                  BackgroundColor="White"
                  TextColor="{StaticResource Danger}"
                  HeightRequest="40"
                  CornerRadius="8"
                  HorizontalOptions="End" />
        </VerticalStackLayout>
      </Border>

      <!-- Description -->
      <Border BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray800}}"
              Padding="20"
              StrokeThickness="1"
              Stroke="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray600}}"
              StrokeShape="RoundRectangle 12"
              Margin="0,10,0,0">
        <VerticalStackLayout Spacing="10">
          <Label Text="Description"
                 FontSize="16"
                 FontAttributes="Bold" />
          <Label Text="{Binding Preset.Description}"
                 FontSize="14"
                 LineHeight="1.5"
                 LineBreakMode="WordWrap"
                 TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray400}}" />
        </VerticalStackLayout>
      </Border>

      <!-- Duration -->
      <Border BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray800}}"
              Padding="20"
              StrokeThickness="1"
              Stroke="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray600}}"
              StrokeShape="RoundRectangle 12">
        <VerticalStackLayout Spacing="5">
          <Label Text="⏱️ Duration"
                 FontSize="14"
                 FontAttributes="Bold" />
          <Label Text="{Binding DurationText}"
                 FontSize="14"
                 TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray400}}" />
        </VerticalStackLayout>
      </Border>

      <!-- Tags -->
      <Border BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource Gray800}}"
              Padding="20"
              StrokeThickness="1"
              Stroke="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray600}}"
              StrokeShape="RoundRectangle 12">
        <VerticalStackLayout Spacing="5">
          <Label Text="🏷️ Tags"
                 FontSize="14"
                 FontAttributes="Bold" />
          <Label Text="{Binding TagsText}"
                 FontSize="14"
                 TextColor="{AppThemeBinding Light={StaticResource Gray600}, Dark={StaticResource Gray400}}"
                 LineBreakMode="WordWrap" />
        </VerticalStackLayout>
      </Border>

      <!-- Play Button -->
      <Button Text="▶ Play This Preset"
              Command="{Binding PlayCommand}"
              BackgroundColor="{StaticResource Success}"
              TextColor="White"
              HeightRequest="60"
              CornerRadius="12"
              FontSize="18"
              FontAttributes="Bold"
              Margin="0,20,0,0">
        <Button.IsVisible>
          <Binding Path="IsLoading" Converter="{StaticResource InvertedBoolConverter}" />
        </Button.IsVisible>
      </Button>

      <!-- Loading Indicator -->
      <ActivityIndicator IsRunning="{Binding IsLoading}"
                         IsVisible="{Binding IsLoading}"
                         Color="{StaticResource Primary}"
                         HeightRequest="60"
                         Margin="0,20,0,0" />

      <!-- Spacer -->
      <BoxView HeightRequest="40" Color="Transparent" />

    </VerticalStackLayout>
  </ScrollView>

</ContentPage>